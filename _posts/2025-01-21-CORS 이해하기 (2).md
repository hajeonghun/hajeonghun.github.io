---
title: CORS(Cross-Origin Resource Sharing) 이해하기 (2)
date: 2025-01-20 16:30:00 +09:00
last_modified_at: 2025-01-20 16:30:00 +09:00
categories: [Browser]
tags:
  [
    CORS,
    SOP,
    Browser
  ]
---

- [CORS(Cross-Origin Resource Sharing) 이해하기 (1)](https://hajeonghun.github.io/posts/CORS-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-(1)/)

## CORS(Cross-Origin Resource Sharing)
CORS(Cross-Origin Resource Sharing)는 브라우저가 다른 출처(Cross-Origin)로부터 리소스를 가져올 수 있도록 서버가 허가 해주는 HTTP 헤더 기반 메커니즘입니다.  
다시말해, SOP의 기본 보안 철학을 유지하면서 신뢰할 수 있는 출처에 한해 특정 리소스를 공유할 수 있도록 허용하는 정책입니다.

![Image](https://github.com/user-attachments/assets/db3e37df-079f-418f-a4f2-2df9fa8573ee)

### CORS를 사용하는 요청
#### 1. fetch, XMLHttpRequest
- `fetch()`와 `XMLHttpRequest`는 자바스크립트로 HTTP 요청을 보낼 때 사용하는 메서드입니다.
- SOP의 영향으로 기본적으로 다른 출처로 요청을 보내거나 응답 데이터를 읽는 것은 제한됩니다.
- 그러나 서버가 적절한 CORS 헤더(`Access-Control-Allow-Origin`)를 Response Header에 포함하면 다른 출처에서도 요청과 응답을 처리할 수 있습니다.

#### 2. 웹 폰트(Web Fonts)
- CSS의 `@font-face` 규칙을 사용하여 다른 출처(Cross-Origin)에서 폰트를 로드할 수 있습니다.
- 하지만 교차 출처(Cross-Origin)에서 폰트를 가져오려면 서버에서 CORS 헤더를 설정해야 합니다.
  - 예를 들어, `Access-Control-Allow-Origin` 헤더가 없으면 브라우저는 해당 폰트를 로드하지 않습니다.
- 이 방식은 특정 웹사이트에서만 사용할 수 있는 폰트를 보호하는 데 유용합니다.

#### 3. WebGL 텍스처(WebGL Textures)
- [WebGL](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API)은 3D 그래픽을 렌더링하기 위한 브라우저 API입니다.
- WebGL에서 외부 이미지를 텍스처로 사용하려면 해당 이미지가 있는 서버에 CORS 헤더가 설정되어 있어야 합니다.
- CORS 설정이 없으면 WebGL은 이미지를 렌더링하지 못합니다.

#### 4. Canvas에서 그린 이미지/비디오 프레임
- HTML `<canvas>` 요소의 `drawImage()` 메서드를 사용해 이미지나 비디오를 캔버스에 그릴 때, 외부 리소스를 사용하려면 서버가 CORS 헤더를 설정해야 합니다.
- 만약 CORS 헤더가 없으면 캔버스에 이미지를 그리더라도 `toDataURL()` 같은 메서드를 사용할 때 **오류**가 발생하여 데이터를 추출할 수 없습니다.
  - 이는 보안상의 이유로, 외부 데이터를 악용하지 못하게 하기 위한 제한입니다.

#### 5. CSS Shapes
- [CSS Shapes](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_shapes)는 콘텐츠를 특정 형태로 감싸거나 Clipping(잘라내기)하는 데 사용됩니다.
- 외부 이미지를 사용하여 이러한 형태를 정의하려면 이미지가 로드되는 서버에 CORS 헤더가 필요합니다.
- CORS가 설정되지 않으면 외부 이미지를 CSS Shapes에 사용할 수 없습니다.

## CORS 동작 방식

### Simple requests

